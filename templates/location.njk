<name>{{ location.name | default('Unknown', true) | escape }}</name>
<description>{{ location.description | default('', true) | escape }}</description>
{% if location.shortDescription %}
<shortDescription>{{ location.shortDescription | escape }}</shortDescription>
{% endif %}
<region>{{ location.regionName | default('Unknown', true) | escape }}</region>
<baseLevel>{{ location.baseLevel | default(1, true) }}</baseLevel>
<isStub>{{ location.isStub | default(false) }}</isStub>
{% if location.controllingFactionName %}
<controllingFaction>{{ location.controllingFactionName | escape }}</controllingFaction>
{% endif %}
<exits>
{% for exit in location.exits %}
  <exit>
    <direction>{{ exit.direction | default('', true) | escape }}</direction>
    <name>{{ exit.name | default('', true) | escape }}</name>
    <destination>{{ exit.destinationName | default('Unknown destination', true) | escape }}</destination>
    {% if exit.destinationRegionName %}<destinationRegion>{{ exit.destinationRegionName | escape }}</destinationRegion>{% endif %}
    <isVehicle>{{ exit.isVehicle | default(false) }}</isVehicle>
    {% if exit.vehicleType %}<vehicleType>{{ exit.vehicleType | escape }}</vehicleType>{% endif %}
  </exit>
{% endfor %}
</exits>
<npcs>
{% for npc in location.npcs %}
  <npc>
    <name>{{ npc.name | default('Unknown', true) | escape }}</name>
    <class>{{ npc.class | default('Unknown', true) | escape }}</class>
    <race>{{ npc.race | default('Unknown', true) | escape }}</race>
    <level>{{ npc.level | default(1, true) }}</level>
    <summary>{{ npc.summary | default('', true) | escape }}</summary>
  </npc>
{% endfor %}
</npcs>
<items>
{% for item in location.items %}
  <item>
    <name>{{ item.name | default('Unknown', true) | escape }}</name>
    <rarity>{{ item.rarity | default('common', true) | escape }}</rarity>
    <level>{{ item.level | default(1, true) }}</level>
    <summary>{{ item.summary | default('', true) | escape }}</summary>
  </item>
{% endfor %}
</items>
<scenery>
{% for scenery in location.scenery %}
  <sceneryItem>
    <name>{{ scenery.name | default('Unknown', true) | escape }}</name>
    <rarity>{{ scenery.rarity | default('common', true) | escape }}</rarity>
    <level>{{ scenery.level | default(1, true) }}</level>
    <summary>{{ scenery.summary | default('', true) | escape }}</summary>
  </sceneryItem>
{% endfor %}
</scenery>
<statusEffects>
{% for effect in location.statusEffects %}
  <effect>
    <description>{{ effect.description | default('', true) | escape }}</description>
    <duration>{{ effect.duration | default('unknown', true) | escape }}</duration>
  </effect>
{% endfor %}
</statusEffects>
