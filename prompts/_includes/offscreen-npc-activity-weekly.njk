You are generating hidden weekly world-state notes for offscreen NPC activity.

Task:
- Select exactly {{ npcActivityTargetCount }} NPCs from <candidateNpcs>.
- Focus on the most important non-present NPCs.
- Describe what each selected NPC has been doing over the past week.
- Exclude all names listed under <excludedFromTwiceDailyPrompts>.
- Include destination region/location fields if they moved; otherwise keep the best current known region/location.
- Do not include NPCs outside <candidateNpcs>.
- Keep each activity summary concise and concrete (1-3 sentences).
- Very important: follow the instructions in &lt;writingStyleNotes&gt; and any tonal guidelines. If the story begins to stray from these tonal guidelines, adjust the activity summaries to realign with the intended mood and style.

Output requirements:
- Return XML only.
- Use this schema exactly:
<npcActivityReport>
  <npc>
    <name>...</name>
    <activitySummary>...</activitySummary>
    <moved>true|false</moved>
    <regionName>...</regionName>
    <locationName>...</locationName>
  </npc>
</npcActivityReport>

<excludedFromTwiceDailyPrompts>
{% for excludedName in npcActivityExcludedNames %}
  <name>{{ excludedName }}</name>
{% endfor %}
</excludedFromTwiceDailyPrompts>

<candidateNpcs>
{% for candidate in npcActivityCandidates %}
  <npcCandidate>
    <name>{{ candidate.name }}</name>
    <currentRegionName>{{ candidate.currentRegionName | default('Unknown Region', true) }}</currentRegionName>
    <currentLocationName>{{ candidate.currentLocationName | default('Unknown Location', true) }}</currentLocationName>
    {% if candidate.lastMentionTimestamp %}<lastMentionTimestamp>{{ candidate.lastMentionTimestamp }}</lastMentionTimestamp>{% endif %}
    {% if candidate.lastMentionPreview %}<lastMentionPreview>{{ candidate.lastMentionPreview }}</lastMentionPreview>{% endif %}
  </npcCandidate>
{% endfor %}
</candidateNpcs>
